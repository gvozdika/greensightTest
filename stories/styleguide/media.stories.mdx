import { Meta, Story, Canvas } from '@storybook/addon-docs/blocks';
import { action } from '@storybook/addon-actions';
import Media from 'react-media';
import centeredDecorator from '@decorators/centeredDecorator';

<Meta title="Styleguide / Media" decorators={[centeredDecorator]} />

# Media

## @custom-media

–ê–¥–∞–ø—Ç–∏–≤–Ω–∞—è –≤—ë—Ä—Å—Ç–∫–∞ —Ä–µ–∞–ª–∏–∑—É–µ—Ç—Å—è —á–µ—Ä–µ–∑ –Ω–∞–ø–∏—Å–∞–Ω–∏–µ –º–µ–¥–∏–∞–∑–∞–ø—Ä–æ—Å–æ–≤. –í –∫–∞—á–µ—Å—Ç–≤–µ –±—Ä–µ–π–∫–ø–æ–∏–Ω—Ç–æ–≤ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `@custom-media`, –ø–æ–¥–∫–ª—é—á–∞—é—â–∏–π –ø—Ä–µ–¥—É—Å–º–æ—Ç—Ä–µ–Ω–Ω—ã–µ –≤ `styles/media.css` –º–µ–¥–∏–∞–∑–∞–ø—Ä–æ—Å—ã. –ü–µ—Ä–µ—Ö–æ–¥—ã –∏–¥—É—Ç –ø–æ –ª–æ–≥–∏–∫–µ desktop first. –ù–∞–ø—Ä–∏–º–µ—Ä –¥–ª—è —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–π < 480:

media.css:

```css
@custom-media --mobile (width <= 479px);
```

example.css:

```css
.example {
    font-size: 16px;

    @media (--mobile) {
        font-size: 18px;
    }
}
```

## react-media

–í React –µ—Å–ª–∏ —á—Ç–æ-—Ç–æ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ, —Ç–æ –µ–≥–æ –Ω–µ –Ω—É–∂–Ω–æ —Ä–µ–Ω–¥–µ—Ä–∏—Ç—å (–∞ –Ω–µ –ø—Ä–æ—Å—Ç–æ —Å–∫—Ä—ã–≤–∞—Ç—å —á–µ—Ä–µ–∑ display: none). –î–ª—è —Ä–µ–Ω–¥–µ—Ä–∞ –Ω–∞ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è—Ö —Ä–∞–∑–Ω—ã—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ –≤–º–µ—Å—Ç–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è `matchMedia` –Ω–∞–ø—Ä—è–º—É—é –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è [react-media](https://github.com/ReactTraining/react-media). –û–Ω –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –∫–æ–º–ø–æ–Ω–µ–Ω—Ç `Media`, —á–µ—Ä–µ–∑ –∫–æ—Ç–æ—Ä—ã–π –¥–æ—Å—Ç–∏–≥–∞–µ—Ç—Å—è —É—Å–ª–æ–≤–Ω—ã–π —Ä–µ–Ω–¥–µ—Ä.

### Simple

–í –ø—Ä–æ—Å—Ç–µ–π—à–µ–º —Å–ª—É—á–∞–µ –Ω–∞–º –Ω—É–∂–Ω–æ –ø–æ–∫–∞–∑–∞—Ç—å –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –Ω–∞ –æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω–æ–º —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–∏, –∏–Ω–∞—á–µ –Ω–µ –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å –Ω–∏—á–µ–≥–æ. –î–ª—è —ç—Ç–æ–≥–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Å–æ—á–µ—Ç–∞–Ω–∏–µ `query` / `render`.

<Canvas>
    <Story name="simple">
        <div>
            –ù–∞ —à–∏—Ä–∏–Ω–µ —ç–∫—Ä–∞–Ω–∞ &lt; 768px –∑–¥–µ—Å—å –ø–æ—è–≤–∏—Ç—Å—è —Ç–µ–∫—Å—Ç:
            <Media query={{ maxWidth: 767 }} render={() => <p>–¢–µ–∫—Å—Ç</p>} onChange={action('onChange')} />
        </div>
    </Story>
</Canvas>

### Query

–í —Å–ª—É—á–∞–µ –∫–æ–≥–¥–∞ –Ω—É–∂–Ω–æ –ø–æ–∫–∞–∑–∞—Ç—å –ª–∏–±–æ –æ–¥–∏–Ω –∫–æ–º–ø–æ–Ω–µ–Ω—Ç, –ª–∏–±–æ –¥—Ä—É–≥–æ–π –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `children` –≤ –∫–∞—á–µ—Å—Ç–≤–µ render prop —Å –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π `matches`.

<Canvas>
    <Story name="query">
        <div>
            –ù–∞ —à–∏—Ä–∏–Ω–µ —ç–∫—Ä–∞–Ω–∞ &lt; 768px –∑–¥–µ—Å—å –ø–æ—è–≤–∏—Ç—Å—è –º–∞–ª—ã–π —Ç–µ–∫—Å—Ç, –∏–Ω–∞—á–µ –∫—Ä—É–ø–Ω—ã–π:
            <Media query={{ maxWidth: 767 }} onChange={action('onChange')}>
                {matches =>
                    matches ? (
                        <p style={{ fontSize: '12px' }}>
                            <em>–¢–µ–∫—Å—Ç</em>
                        </p>
                    ) : (
                        <p style={{ fontSize: '24px' }}>
                            <strong>–¢–µ–∫—Å—Ç</strong>
                        </p>
                    )
                }
            </Media>
        </div>
    </Story>
</Canvas>

### Queries

–í –±–æ–ª–µ–µ —Å–ª–æ–∂–Ω–æ–º —Å–ª—É—á–∞–µ —Å –Ω–µ—Å–∫–æ–ª—å–∫–∏–º–∏ —Ç–æ—á–∫–∞–º–∏ –ø–µ—Ä–µ—Ö–æ–¥–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `queries`, —á–µ—Ä–µ–∑ –∫–æ—Ç–æ—Ä—ã–π –±—Ä–µ–π–∫–ø–æ–∏–Ω—Ç–∞–º –ø—Ä–∏—Å–≤–∞–∏–≤–∞—é—Ç—Å—è –∏–º–µ–Ω–∞, –∞ –∑–∞—Ç–µ–º –ø–æ —ç—Ç–∏–º –∏–º–µ–Ω–∞–º –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç—Å—è —É—Å–ª–æ–≤–Ω—ã–π —Ä–µ–Ω–¥–µ—Ä –≤ `children`.

<Canvas>
    <Story name="queries">
        <div>
            –ù–∞ —à–∏—Ä–∏–Ω–µ —ç–∫—Ä–∞–Ω–∞ &lt; 768px –∑–¥–µ—Å—å –ø–æ—è–≤–∏—Ç—Å—è –º–∞–ª—ã–π —Ç–µ–∫—Å—Ç, –Ω–∞ &lt; 1200px –æ–±—ã—á–Ω—ã–π, –∏–Ω–∞—á–µ –∫—Ä—É–ø–Ω—ã–π:
            <Media
                queries={{
                    small: { maxWidth: 767 },
                    medium: { minWidth: 768, maxWidth: 1199 },
                    large: { minWidth: 1200 },
                }}
                onChange={action('onChange')}
            >
                {matches => (
                    <>
                        {matches.small && (
                            <p style={{ fontSize: '12px' }}>
                                <em>–¢–µ–∫—Å—Ç</em>
                            </p>
                        )}
                        {matches.medium && <p>–¢–µ–∫—Å—Ç</p>}
                        {matches.large && (
                            <p style={{ fontSize: '24px' }}>
                                <strong>–¢–µ–∫—Å—Ç</strong>
                            </p>
                        )}
                    </>
                )}
            </Media>
        </div>
    </Story>
</Canvas>

### SSR

–û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Å–æ–±–ª—é–¥–µ–Ω–∏—è —É—Å–ª–æ–≤–∏—è —Ä–µ–Ω–¥–µ—Ä–∞ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –≤ –±—Ä–∞—É–∑–µ—Ä–µ, –∏—Å—Ö–æ–¥—è –∏–∑ —Ä–∞–∑–º–µ—Ä–∞ –æ–∫–Ω–∞. –≠—Ç–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ, —Ç–∞–∫ —á—Ç–æ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é —Å—á–∏—Ç–∞–µ—Ç—Å—è, —á—Ç–æ —É—Å–ª–æ–≤–∏–µ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è. –ù–∞–ø—Ä–∏–º–µ—Ä, –≤ —Ç–µ—Å—Ç–æ–≤–æ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ –º–æ–±–∏–ª—å–Ω–∞—è —à–∞–ø–∫–∞ –ø–æ—è–≤–ª—è–µ—Ç—Å—è –Ω–∞ –º–æ–±–∏–ª—å–Ω—ã—Ö —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è—Ö, –∏ –ø—Ä–∏ –¥–µ—Ñ–æ–ª—Ç–Ω—ã—Ö –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö, –æ—Ç–∫–ª—é—á–∏–≤ —Å–∫—Ä–∏–ø—Ç—ã, –≤—ã –±—É–¥–µ—Ç–µ –≤–∏–¥–µ—Ç—å –º–æ–±–∏–ª—å–Ω—É—é —à–∞–ø–∫—É, –∞ —Ç–∞–∫–∂–µ –ø—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –Ω–∞ –¥–µ—Å–∫—Ç–æ–ø–µ –∑–∞–º–µ—Ç–∏—Ç–µ –≤–∏–∑—É–∞–ª—å–Ω—ã–π —Å–∫–∞—á–æ–∫ –æ—Ç –º–æ–±–∏–ª—å–Ω–æ–π —à–∞–ø–∫–∏ –∫ –¥–µ—Å–∫—Ç–æ–ø–Ω–æ–π, —Ç.–∫. –æ–Ω–∞ –ø–æ–¥–º–µ–Ω–∏—Ç—Å—è –Ω–∞ –∫–ª–∏–µ–Ω—Ç–µ.

–î–ª—è —É–∫–∞–∑–∞–Ω–∏—è –¥–µ—Ñ–æ–ª—Ç–Ω–æ–≥–æ —Å—Ç–∞—Ç—É—Å–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `defaultMatches`. –ú–æ–∂–Ω–æ –ø–µ—Ä–µ–¥–∞—Ç—å, –∫ –ø—Ä–∏–º–µ—Ä—É, false –∏ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ –æ—Ç—Ä–µ–Ω–¥–µ—Ä–∏—Ç—Å—è –¥–µ—Å–∫—Ç–æ–ø–Ω–∞—è —à–∞–ø–∫–∞. –ù–æ —ç—Ç—É –ø—Ä–æ–±–ª–µ–º—É –º–æ–∂–Ω–æ —Ä–µ—à–∏—Ç—å —ç–ª–µ–≥–∞–Ω—Ç–Ω–µ–µ: –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–≥–æ user-agent. –î–ª—è —ç—Ç–æ–≥–æ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ –≤ `server/render.js` –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –ø–∞—Ä—Å–∏–Ω–≥ –∑–∞–≥–æ–ª–æ–≤–∫–æ–≤ —á–µ—Ä–µ–∑ [ua-parser-js](https://github.com/faisalman/ua-parser-js) - –∑–∞–≥–æ–ª–æ–≤–∫–∏ –ø—Ä–∏–≤–æ–¥—è—Ç—Å—è –∫ —É–¥–æ–±–Ω–æ–º—É —Ñ–æ—Ä–º–∞—Ç—É, –∞ –∑–∞—Ç–µ–º —Ä–∞–∑–º–µ—â–∞—é—Ç—Å—è –≤ redux store (—Å–º. `reducers/ua.js`), —Å—Ç–∞–Ω–æ–≤—è—Å—å –¥–æ—Å—Ç—É–ø–Ω—ã–º–∏ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–Ω–æ–º —Ä–µ–Ω–¥–µ—Ä–µ. –ü–æ—Å–ª–µ —ç—Ç–æ–≥–æ –º—ã –º–æ–∂–µ–º –æ—Ä–≥–∞–Ω–∏–∑–æ–≤–∞—Ç—å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ –∫ —Å—Ç–æ—Ä—É —á–µ—Ä–µ–∑ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –∏ –ø–µ—Ä–µ–¥–∞—Ç—å –≤ `defaultMatches` –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ `defaultMatches={ua.device.type === 'mobile'}`. –ü–æ—Å–ª–µ —ç—Ç–æ–≥–æ –º–æ–±–∏–ª—å–Ω–∞—è —à–∞–ø–∫–∞ —Å—Ç–∞–Ω–µ—Ç —Å—Ä–∞–∑—É –≤–∏–¥–Ω–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º –º–æ–±–∏–ª—å–Ω—ã—Ö –¥–µ–≤–∞–π—Å–æ–≤, –∏ –Ω–∞–æ–±–æ—Ä–æ—Ç –Ω–µ –≤–∏–¥–Ω–∞ –≤—Å–µ–º –æ—Å—Ç–∞–ª—å–Ω—ã–º.

‚òùüèø –í user-agent –¥–æ—Å—Ç—É–ø–µ–Ω —Ç–∏–ø –¥–µ–≤–∞–π—Å–∞, –∞ –Ω–µ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–µ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ, —Ç–∞–∫ —á—Ç–æ –≥–∏–ø–æ—Ç–µ–∑—ã –Ω—É–∂–Ω–æ —Å—Ç—Ä–æ–∏—Ç—å, –∏—Å—Ö–æ–¥—è –∏–∑ —ç—Ç–æ–≥–æ.
